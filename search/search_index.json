{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Home Welcome to the wiki page for the sing-box project. The universal proxy platform.","title":"Home"},{"location":"#home","text":"Welcome to the wiki page for the sing-box project. The universal proxy platform.","title":"Home"},{"location":"installation/","text":"Installation sing-box requires Golang 1.18 or a higher version. $ go install github.com/sagernet/sing-box@latest The binary is built under $GOPATH/bin $ sing-box -v","title":"Installation"},{"location":"installation/#installation","text":"sing-box requires Golang 1.18 or a higher version. $ go install github.com/sagernet/sing-box@latest The binary is built under $GOPATH/bin $ sing-box -v","title":"Installation"},{"location":"license/","text":"License Copyright (C) 2022 by nekohasekai <contact-sagernet@sekai.icu> This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version. This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details. You should have received a copy of the GNU General Public License along with this program. If not, see <http://www.gnu.org/licenses/>.","title":"License"},{"location":"license/#license","text":"Copyright (C) 2022 by nekohasekai <contact-sagernet@sekai.icu> This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version. This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details. You should have received a copy of the GNU General Public License along with this program. If not, see <http://www.gnu.org/licenses/>.","title":"License"},{"location":"configuration/","text":"Introduction sing-box uses JSON for configuration files. Structure { \"log\" : {}, \"dns\" : {}, \"inbounds\" : {}, \"outbounds\" : {}, \"route\" : {} } Fields Key Format log Log dns DNS inbounds Inbound outbounds Outbound route Route Check $ sing-box check Format $ sing-box format -w","title":"Introduction"},{"location":"configuration/#introduction","text":"sing-box uses JSON for configuration files.","title":"Introduction"},{"location":"configuration/#structure","text":"{ \"log\" : {}, \"dns\" : {}, \"inbounds\" : {}, \"outbounds\" : {}, \"route\" : {} }","title":"Structure"},{"location":"configuration/#fields","text":"Key Format log Log dns DNS inbounds Inbound outbounds Outbound route Route","title":"Fields"},{"location":"configuration/#check","text":"$ sing-box check","title":"Check"},{"location":"configuration/#format","text":"$ sing-box format -w","title":"Format"},{"location":"configuration/log/","text":"Log Structure { \"log\" : { \"disabled\" : false , \"level\" : \"info\" , \"output\" : \"box.log\" , \"timestamp\" : true } } Fields disabled Disable logging, no output after start. level Log level. One of: trace debug info warn error fatal panic . output Output file path. Will not write log to console after enable. timestamp Add time to each line.","title":"Log"},{"location":"configuration/log/#log","text":"","title":"Log"},{"location":"configuration/log/#structure","text":"{ \"log\" : { \"disabled\" : false , \"level\" : \"info\" , \"output\" : \"box.log\" , \"timestamp\" : true } }","title":"Structure"},{"location":"configuration/log/#fields","text":"","title":"Fields"},{"location":"configuration/log/#disabled","text":"Disable logging, no output after start.","title":"disabled"},{"location":"configuration/log/#level","text":"Log level. One of: trace debug info warn error fatal panic .","title":"level"},{"location":"configuration/log/#output","text":"Output file path. Will not write log to console after enable.","title":"output"},{"location":"configuration/log/#timestamp","text":"Add time to each line.","title":"timestamp"},{"location":"configuration/dns/","text":"Structure { \"dns\" : { \"servers\" : [], \"rules\" : [], \"final\" : \"\" , \"strategy\" : \"prefer_ipv6\" , \"disable_cache\" : false , \"disable_expire\" : false } } Fields Key Format server List of DNS Server rules List of DNS Rule final Default dns server tag, the first one will be used if it is empty. strategy Default domain strategy for resolving the domain names. One of prefer_ipv4 prefer_ipv6 ipv4_only ipv6_only . disable_cache Disable dns cache. disable_expire Disable dns cache expire.","title":"Index"},{"location":"configuration/dns/#structure","text":"{ \"dns\" : { \"servers\" : [], \"rules\" : [], \"final\" : \"\" , \"strategy\" : \"prefer_ipv6\" , \"disable_cache\" : false , \"disable_expire\" : false } }","title":"Structure"},{"location":"configuration/dns/#fields","text":"Key Format server List of DNS Server rules List of DNS Rule","title":"Fields"},{"location":"configuration/dns/#final","text":"Default dns server tag, the first one will be used if it is empty.","title":"final"},{"location":"configuration/dns/#strategy","text":"Default domain strategy for resolving the domain names. One of prefer_ipv4 prefer_ipv6 ipv4_only ipv6_only .","title":"strategy"},{"location":"configuration/dns/#disable_cache","text":"Disable dns cache.","title":"disable_cache"},{"location":"configuration/dns/#disable_expire","text":"Disable dns cache expire.","title":"disable_expire"},{"location":"configuration/dns/rule/","text":"Structure { \"dns\" : { \"rules\" : [ { \"inbound\" : [ \"mixed-in\" ], \"network\" : \"tcp\" , \"protocol\" : [ \"tls\" , \"http\" , \"quic\" ], \"domain\" : [ \"test.com\" ], \"domain_suffix\" : [ \".cn\" ], \"domain_keyword\" : [ \"test\" ], \"domain_regex\" : [ \"^stun\\\\..+\" ], \"geosite\" : [ \"cn\" ], \"source_geoip\" : [ \"private\" ], \"source_ip_cidr\" : [ \"10.0.0.0/24\" ], \"source_port\" : [ 12345 ], \"port\" : [ 80 , 443 ], \"outbound\" : [ \"direct\" ], \"server\" : \"local\" }, { \"type\" : \"logical\" , \"mode\" : \"and\" , \"rules\" : [], \"server\" : \"local\" } ] } } You can ignore the JSON Array [] tag when the content is only one item Default Fields The default rule uses the following matching logic: ( domain || domain_suffix || domain_keyword || domain_regex || geosite ) && ( source_geoip || source_ip_cidr ) && other fields inbound Tags of inbound . network tcp or udp . domain Match full domain. domain_suffix Match domain suffix. domain_keyword Match domain using keyword. domain_regex Match domain using regular expression. geosite Match geosite. source_geoip Match source geoip. source_ip_cidr Match source ip cidr. source_port Match source port. port Match port. outbound Match outbound. server Tag of the target dns server. Logical Fields type logical mode and or or rules Included default rules. server Tag of the target dns server.","title":"DNS Rule"},{"location":"configuration/dns/rule/#structure","text":"{ \"dns\" : { \"rules\" : [ { \"inbound\" : [ \"mixed-in\" ], \"network\" : \"tcp\" , \"protocol\" : [ \"tls\" , \"http\" , \"quic\" ], \"domain\" : [ \"test.com\" ], \"domain_suffix\" : [ \".cn\" ], \"domain_keyword\" : [ \"test\" ], \"domain_regex\" : [ \"^stun\\\\..+\" ], \"geosite\" : [ \"cn\" ], \"source_geoip\" : [ \"private\" ], \"source_ip_cidr\" : [ \"10.0.0.0/24\" ], \"source_port\" : [ 12345 ], \"port\" : [ 80 , 443 ], \"outbound\" : [ \"direct\" ], \"server\" : \"local\" }, { \"type\" : \"logical\" , \"mode\" : \"and\" , \"rules\" : [], \"server\" : \"local\" } ] } } You can ignore the JSON Array [] tag when the content is only one item","title":"Structure"},{"location":"configuration/dns/rule/#default-fields","text":"The default rule uses the following matching logic: ( domain || domain_suffix || domain_keyword || domain_regex || geosite ) && ( source_geoip || source_ip_cidr ) && other fields","title":"Default Fields"},{"location":"configuration/dns/rule/#inbound","text":"Tags of inbound .","title":"inbound"},{"location":"configuration/dns/rule/#network","text":"tcp or udp .","title":"network"},{"location":"configuration/dns/rule/#domain","text":"Match full domain.","title":"domain"},{"location":"configuration/dns/rule/#domain_suffix","text":"Match domain suffix.","title":"domain_suffix"},{"location":"configuration/dns/rule/#domain_keyword","text":"Match domain using keyword.","title":"domain_keyword"},{"location":"configuration/dns/rule/#domain_regex","text":"Match domain using regular expression.","title":"domain_regex"},{"location":"configuration/dns/rule/#geosite","text":"Match geosite.","title":"geosite"},{"location":"configuration/dns/rule/#source_geoip","text":"Match source geoip.","title":"source_geoip"},{"location":"configuration/dns/rule/#source_ip_cidr","text":"Match source ip cidr.","title":"source_ip_cidr"},{"location":"configuration/dns/rule/#source_port","text":"Match source port.","title":"source_port"},{"location":"configuration/dns/rule/#port","text":"Match port.","title":"port"},{"location":"configuration/dns/rule/#outbound","text":"Match outbound.","title":"outbound"},{"location":"configuration/dns/rule/#server","text":"Tag of the target dns server.","title":"server"},{"location":"configuration/dns/rule/#logical-fields","text":"","title":"Logical Fields"},{"location":"configuration/dns/rule/#type","text":"logical","title":"type"},{"location":"configuration/dns/rule/#mode","text":"and or or","title":"mode"},{"location":"configuration/dns/rule/#rules","text":"Included default rules.","title":"rules"},{"location":"configuration/dns/rule/#server_1","text":"Tag of the target dns server.","title":"server"},{"location":"configuration/dns/server/","text":"Structure { \"dns\" : { \"servers\" : [ { \"tag\" : \"google\" , \"address\" : \"tls://dns.google\" , \"address_resolver\" : \"local\" , \"address_strategy\" : \"prefer_ipv4\" , \"detour\" : \"direct\" } ] } } Fields tag The tag of the dns server. address The address of the dns server. Protocol Format System local TCP tcp://1.0.0.1 UDP 8.8.8.8 udp://8.8.4.4 TLS tls://dns.google HTTPS https://1.1.1.1/dns-query To ensure that system DNS is in effect, rather than go's built-in default resolver, enable CGO at compile time. address_resolver Tag of a another server to resolve the domain name in the address. address_strategy The domain strategy for resolving the domain name in the address. One of prefer_ipv4 prefer_ipv6 ipv4_only ipv6_only . dns.strategy will be used if address_strategy is empty. detour Tag of an outbound for connecting to the dns server. Requests will be sent directly if the empty.","title":"DNS Server"},{"location":"configuration/dns/server/#structure","text":"{ \"dns\" : { \"servers\" : [ { \"tag\" : \"google\" , \"address\" : \"tls://dns.google\" , \"address_resolver\" : \"local\" , \"address_strategy\" : \"prefer_ipv4\" , \"detour\" : \"direct\" } ] } }","title":"Structure"},{"location":"configuration/dns/server/#fields","text":"","title":"Fields"},{"location":"configuration/dns/server/#tag","text":"The tag of the dns server.","title":"tag"},{"location":"configuration/dns/server/#address","text":"The address of the dns server. Protocol Format System local TCP tcp://1.0.0.1 UDP 8.8.8.8 udp://8.8.4.4 TLS tls://dns.google HTTPS https://1.1.1.1/dns-query To ensure that system DNS is in effect, rather than go's built-in default resolver, enable CGO at compile time.","title":"address"},{"location":"configuration/dns/server/#address_resolver","text":"Tag of a another server to resolve the domain name in the address.","title":"address_resolver"},{"location":"configuration/dns/server/#address_strategy","text":"The domain strategy for resolving the domain name in the address. One of prefer_ipv4 prefer_ipv6 ipv4_only ipv6_only . dns.strategy will be used if address_strategy is empty.","title":"address_strategy"},{"location":"configuration/dns/server/#detour","text":"Tag of an outbound for connecting to the dns server. Requests will be sent directly if the empty.","title":"detour"},{"location":"configuration/inbound/","text":"Structure { \"inbounds\" : [ { \"type\" : \"\" , \"tag\" : \"\" , ... } ] }","title":"Index"},{"location":"configuration/inbound/#structure","text":"{ \"inbounds\" : [ { \"type\" : \"\" , \"tag\" : \"\" , ... } ] }","title":"Structure"}]}